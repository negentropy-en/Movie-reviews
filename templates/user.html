{% extends "base.html" %}
{% block content %}

<h1>User: {{ user.username }}</h1>

{% if stats %}
  <div class="block">
    <p><strong>Number of reviews:</strong> {{ stats.count }}</p>
    <p><strong>First review:</strong> {{ stats.first_review if stats.first_review else "-" }}</p>
    <p><strong>Most recent review:</strong> {{ stats.last_review if stats.last_review else "-" }}</p>
  </div>
{% else %}
  <p>No statistics available.</p>
{% endif %}

<h2>Reviews by {{ user.username }}</h2>

{% if reviews %}
  {% for review in reviews %}
    <div class="block">
      <p>
        <a href="/review/{{ review.id }}"><strong>{{ review.movie_title }}</strong></a>
      </p>
      <p class="muted">
        Created: {{ review.created_at }} •
        Comments: {{ review.comment_count }} •
        Average rating: {{ review.avg_rating if review.avg_rating is not none else "-" }}
      </p>
    </div>
    {% if not loop.last %}<hr>{% endif %}
  {% endfor %}
{% else %}
  <p>This user has not added any reviews yet.</p>
{% endif %}

{% endblock %}
